# 初始C 语言

## C 语言的起源

**1972年，贝尔实验室的丹尼斯·里奇（Dennis Ritch）和肯·汤普逊（Ken Thompson）在开发UNIX操作系统时设计了C 语言。**

C 语言是在B 语言的基础上进行设计的，设计初衷是将其作为程序员使用的一种编程工具，其主要目标是成为有用的语言。

1978年布莱恩·柯林汉和丹尼斯·里奇合著的《C 语言程序设计》第1版被公认为C 语言的标准，特别是书中的“C 语言参考手册”成为编译器实现的指导标准。
> 该书未定义C 库，UNIX 实现的库逐渐成为了标准库。

1989年 C89
1990年 C90 C 精神
+ 信任程序员
+ 不妨碍程序员
+ 语言精炼简单
+ 让程序运行更快
+ 只提供一种方法执行一项操作

1994年 C99
遵循C90 标准原则，提出新目标
+ 国际化：支持国际化编程
+ 弥补缺陷：调整现有实践致力于解决明显缺陷
+ 提高计算实用性：加强适应科学和工程项目中关的键数值计算

2011年 C11
新的指导原则：不过于强调信任程序员

## 选择C 语言的理由

C 设计理念：让用户能轻松地完成自顶向下的规划、结构化编程和模块化设计。
> 更易懂、更可靠

C 语言具有通常是汇编语言才具有的微调控制能力，可以根据具体情况微调程序以获得最大运行速度或最有效地使用内存。
> 更紧凑、更高效

在一种系统中编写的C 程序稍作修改或不修改就能在其他系统运行。
> 可移植

程序员利用C 可以访问硬件、操控内存中的位。C 语言有丰富的运算符，能让程序员简洁地表达自己的意图。大多数C实现都有一个大型的库，包含众多有用的C函数。
> 高自由

## 编程机制

### 编程步骤

编程并非是一个线性的过程，有时要在不同的步骤之间往复。
1. 定义目标
2. 设计程序
> **编程时不能跳过定义目标和设计程序，尤其是面对庞大和复杂的程序，因为这样写出的程序难看、缺乏条理、让人难以理解。**
4. 编写代码
5. 编译代码
6. 运行程序
7. 测试调试
> 调试：查找并修复程序错误的过程
8. 维护程序

``` C
# include <stdio.h>  
  
int main() {  
    int dogs;  
    printf("How many dogs do you have?\n");  
    scanf("%d", &dogs);  
    printf("So you have %d dog(s)!\n", dogs);  
  
    return 0;  
}
```

### 编程机制

高级语言简单易学，以更抽象的方式描述行为，不受限于特定CPU 或指令集。

使用合适的编译器或编译器集，便可把一种高级语言程序转换成供各种不同类型CPU 使用的机器语言程序。
> 编译器：检查程序是否有效，把源代码转换成可执行代码的程序。


![[编译器和链接器.png]]
编译和链接
+ 编译器：把源代码<u>.c</u> 转换成中间代码 <u>.obj</u>
+ 链接器：==合并中间代码、**库代码和启动代码（startup code）**==，生成可执行文件 <u>.exe</u>

目标文件与可执行文件
> 中间文件实现形式之一：把源代码转换为机器语言代码，并把结果放在目标代码文件中。
+ 目标文件和可执行文件都是由机器语言指令组成
+ 可执行文件有库函数和启动代码，而目标文件无
> 启动代码：程序和操作系统之间的接口

GNU（"GNU's Not UNIX"）项目始于1987年，是一个开发大量自由UNIX 软件的和合集。项目中包括GCC，GCC 中包括 GCC C 编译器。

Gcgwin 和MinGW：提供GCC C 编译器
+ Gcgwin：在视窗运行，模仿Linux 命令环境
+ MinGW：在命题提示模式中运行

gcc 查看版本
``` shell
gcc -v
```

# C 语言概述

## C 语言解释

### 头文件
``` C
#include<stdio.h>
```
+ `#include`：把头文件导入到当前位置
> 头文件：帮助编译器正确的组装程序
+ `stdio.h`：标准输入/输出头文件
> 不内置输入输出体系了C 语言轻装上阵的哲学

### main() 函数
``` C
int main(void)
```
+ `main()`：C 程序一定从main() 函数开始执行
> **函数是C 程序的基本模块**
+ `int`：关键字（keyword），表明函数返回类型

``` C
void butler();
void butler(){
	printf("You rang, sir?\n");
}
```
+ `void butler();`：函数原型（prototype），也叫函数声明（function declaration），告知编译器正在使用某函数
+ `void butler(){}`：函数定义，函数定义即是函数本身的源代码

### 注释
``` C
/*
多行注释
多行注释
*/

// C99 新增了单行注释
print('hello world'); // 单行注释
```

### 函数体和块
``` C
{
	//
}
```
+ **花括号标记函数体的开始结束**
+ 花括号将多条语句合并为一块

### 声明
``` C
int num;
```
`int num`：声明（declaration）
+ 把特定标识符与计算机内存中的特定位置联系起来
+ 确定存储在某位置的数据类型
> C99 和C11 遵循C++ 惯例可以把声明放在任何位置，但==必须先声明后使用变量==。

需要声明的原因
1. 结构更清晰
2. 思路更清晰
3. 易发现错误
4. 通过C 编译

`num`：标识符（identifier）、变量（variable）

标识符命名规则
+ 见名知意
+ 不能是系统保留关键字
+ 第1个字符必须是字母或下划线
+ 其余字符可以是小写、大写（ 区分大小写）、数字和下划线

多条声明
``` C
int feet, fathoms;

// 或
int feet;
int fathoms;
```

初始化（initialize）：为变量赋一个初始值，初始化可以直接在声明中完成。
``` C
int num = 1;
```

### 赋值
``` C
num = 1;
```
赋值表达式运算顺序：从右将值赋给左侧

### printf() 函数
``` C
printf("I am a simple");
printf("computer.\n");
printf("My favourite num is %d because it is first.\n", nums);
```
+ `\n`：转义序列（escape sequence），用以代表难以表示或无法输入的字符
+ `%d`：占位符
> 转换说明（conversion specification）

**函数执行结束后，控制权被返回至主调函数（calling function）。**

### return 语句
``` C
return 0;
```

有返回值的C 函数要有return 语句。

**遗漏main() 函数中的return 语句时，默认返回0。**

## 提高程序可读性
1. 见名知意
2. 添加注释
3. 空行分隔不同部分
4. 一行只写一个语句

分号告诉编译器一条语句在哪里结束。

## 调试程序
+ bug：程序的错误
+ debug：调试，找出并修正错误的过程

==C 语言语法错误：把有效的C 符号放在错误的地方。==
> `int n, int n2, int n3;`

语义错误：语法符合规则，但是没能得到预期的结果。
编译器无法检测语义错误，因为编译器无法了解程序员的真正意图，所以只能自己找错。

程序状态（program state）：在程序的执行过程中，某给定点上所有变量值的集合。是计算机当前状态的一个快照。

跟踪程序状态方法：
+ 手工模拟
+ 打印输出
+ 调试运行

不像人类的语言可以包含部分瑕疵。对于编译器而已，几乎正确仍然是错误。
